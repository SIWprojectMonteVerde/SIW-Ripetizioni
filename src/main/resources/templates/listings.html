<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">
<head>
  <meta charset="UTF-8">
  <title>SIW Ripetizioni</title>
  <link rel="stylesheet" href="/css/annunci.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="/css/navbar.css">
</head>
<body>

<div th:replace="fragments/navbarFragments :: navbarFragment(searchField=false,searchItem='',searchMsg='')"></div>

<main class="container">
  <section class="search_zone">
    <div th:replace="fragments/advancedSearh :: searchBar(genere=${genere})"></div>
  </section>

  <section class="annunci">
    <h1 class="text-center mb-4">Annunci disponibili</h1>
    <div class="card-grid">
      <div class="card" th:each="listing : ${listings}">
        <div class="card-header">
          <div class="avatar">
            <img th:src="@{'/user/' + ${listing.teacher.id} + '/photo'}"
                 alt="Avatar"
                 onerror="this.src='/images/teacher_avatar.jpg';">
          </div>
          <strong th:text="'Prof. ' + ${listing.teacher.lastName}"></strong>
        </div>
        <div class="info">
          <p th:text="${listing.subject.name}"></p>
          <p class="price" th:text="${listing.hourlyRate} + ' €/h'"></p>
          <p th:text="'Disponibilità: ' + ${#lists.isEmpty(listing.availabilities) ? '---' : listing.availabilities[0].date + ' ' + listing.availabilities[0].startTime + '-' + listing.availabilities[0].endTime}"></p>
          <a class="btn btn-primary" th:href="@{'/listings/' + ${listing.id}}">Visualizza</a>
        </div>
      </div>
    </div>
  </section>
</main>

<footer>
  <p>© 2025 SIW Ripetizioni - Tutti i diritti riservati</p>
</footer>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/searchBar.js"></script>
</body>
</html>